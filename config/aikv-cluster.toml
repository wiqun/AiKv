# AiKv é›†ç¾¤æ¨¡å¼é…ç½®æ¨¡æ¿
# Cluster Mode Configuration Template
#
# ä½¿ç”¨æ–¹æ³• / Usage:
#   1. ç¼–è¯‘å¸¦é›†ç¾¤ç‰¹æ€§çš„ç‰ˆæœ¬ / Build with cluster feature:
#      cargo build --release --features cluster
#
#   2. å¤åˆ¶å¹¶ä¿®æ”¹é…ç½® / Copy and modify config:
#      cp config/aikv-cluster.toml config.toml
#      vim config.toml
#
#   3. å¯åŠ¨æœåŠ¡ / Start service:
#      ./target/release/aikv --config config.toml
#
# é…ç½®çŠ¶æ€è¯´æ˜ / Configuration Status Legend:
#   âœ… å·²å®ç° / Implemented - è¯¥é…ç½®é¡¹å·²åœ¨ä»£ç ä¸­ç”Ÿæ•ˆ
#   ğŸš§ è®¡åˆ’ä¸­ / Planned - è¯¥é…ç½®é¡¹å·²å®šä¹‰ä½†å°šæœªå®ç°
#

# ============================================================
# æœåŠ¡å™¨é…ç½® / Server Configuration
# ============================================================
[server]
# âœ… ç›‘å¬åœ°å€ï¼ˆé›†ç¾¤æ¨¡å¼æ¨èä½¿ç”¨ 0.0.0.0ï¼‰
# Bind address (0.0.0.0 recommended for cluster mode)
host = "0.0.0.0"

# âœ… æ•°æ®ç«¯å£ / Data port
port = 6379

# ğŸš§ ä»¥ä¸‹é…ç½®é¡¹å°šæœªå®ç° / The following options are not yet implemented:
# cluster_port = 16379         # é›†ç¾¤æ€»çº¿ç«¯å£ / Cluster bus port
# max_connections = 10000      # æœ€å¤§å¹¶å‘è¿æ¥æ•° / Maximum concurrent connections
# connection_timeout = 300     # è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰/ Connection timeout in seconds
# tcp_buffer_size = 65536      # TCP ç¼“å†²åŒºå¤§å° / TCP buffer size

# ============================================================
# ğŸš§ é›†ç¾¤é…ç½® / Cluster Configuration (Not yet implemented)
# ============================================================
# [cluster]
# # å¯ç”¨é›†ç¾¤æ¨¡å¼ / Enable cluster mode
# enabled = true
#
# # èŠ‚ç‚¹ IDï¼ˆæ¯ä¸ªèŠ‚ç‚¹å¿…é¡»å”¯ä¸€ï¼‰
# # Node ID (must be unique for each node)
# node_id = "node1"
#
# # èŠ‚ç‚¹åç§°ï¼ˆç”¨äºæ—¥å¿—å’Œç›‘æ§ï¼‰
# # Node name (for logging and monitoring)
# node_name = "aikv-node-1"
#
# # é›†ç¾¤æ•°æ®ç›®å½• / Cluster data directory
# data_dir = "./cluster-data"
#
# # åˆå§‹é›†ç¾¤èŠ‚ç‚¹åˆ—è¡¨ï¼ˆcluster_port åœ°å€ï¼‰
# # Initial cluster peer list (cluster_port addresses)
# peers = [
#     # "192.168.1.101:16379",
#     # "192.168.1.102:16379",
#     # "192.168.1.103:16379",
# ]
#
# # æ˜¯å¦ä¸ºå¼•å¯¼èŠ‚ç‚¹ï¼ˆç¬¬ä¸€ä¸ªå¯åŠ¨çš„èŠ‚ç‚¹è®¾ä¸º trueï¼‰
# # Is this the bootstrap node (set to true for the first node)
# is_bootstrap = false
#
# # èŠ‚ç‚¹è§’è‰² / Node role
# # å¯é€‰å€¼ / Options:
# #   - "master"  : ä¸»èŠ‚ç‚¹ï¼Œå¯è¯»å†™
# #   - "replica" : ä»èŠ‚ç‚¹ï¼Œåªè¯»ï¼ˆéœ€æŒ‡å®š master_idï¼‰
# role = "master"
#
# # ä¸»èŠ‚ç‚¹ IDï¼ˆå½“ role = "replica" æ—¶éœ€è¦è®¾ç½®ï¼‰
# # Master node ID (required when role = "replica")
# # master_id = "node1"

# ============================================================
# å­˜å‚¨é…ç½® / Storage Configuration
# ============================================================
[storage]
# âœ… å­˜å‚¨å¼•æ“ç±»å‹ï¼ˆé›†ç¾¤æ¨¡å¼æ¨èä½¿ç”¨ aidbï¼‰
# Storage engine type (aidb recommended for cluster mode)
engine = "aidb"

# âœ… æ•°æ®å­˜å‚¨ç›®å½• / Data directory
data_dir = "./data"

# âœ… æ•°æ®åº“æ•°é‡ / Number of databases
databases = 16

# ğŸš§ ä»¥ä¸‹é…ç½®é¡¹å°šæœªå®ç° / The following options are not yet implemented:
# max_memory = "2GB"           # æœ€å¤§å†…å­˜ä½¿ç”¨ / Maximum memory usage

# ============================================================
# æ—¥å¿—é…ç½® / Logging Configuration
# ============================================================
[logging]
# âœ… æ—¥å¿—çº§åˆ« / Log level
level = "info"

# ğŸš§ ä»¥ä¸‹é…ç½®é¡¹å°šæœªå®ç° / The following options are not yet implemented:
# file = "./logs/aikv-cluster.log"  # æ—¥å¿—æ–‡ä»¶è·¯å¾„ / Log file path
# console = true                     # æ˜¯å¦è¾“å‡ºåˆ°æ§åˆ¶å° / Output to console
# max_size = "100MB"                 # æ—¥å¿—è½®è½¬å¤§å° / Log rotation size
# max_backups = 10                   # ä¿ç•™æ—¥å¿—æ–‡ä»¶æ•°é‡ / Number of backup log files

# ============================================================
# ğŸš§ ä»¥ä¸‹é…ç½®èŠ‚å°šæœªå®ç° / The following sections are not yet implemented
# ============================================================

# [raft]
# # Raft å…±è¯†é…ç½® / Raft Consensus Configuration
# heartbeat_interval = 100      # å¿ƒè·³é—´éš”ï¼ˆæ¯«ç§’ï¼‰/ Heartbeat interval in milliseconds
# election_timeout_min = 300    # é€‰ä¸¾è¶…æ—¶èŒƒå›´ï¼ˆæ¯«ç§’ï¼‰/ Election timeout range
# election_timeout_max = 500
# snapshot_interval = 10000     # å¿«ç…§é—´éš”ï¼ˆæ—¥å¿—æ¡ç›®æ•°ï¼‰/ Snapshot interval
# log_compaction_threshold = 50000  # æ—¥å¿—å‹ç¼©é˜ˆå€¼ / Log compaction threshold
# max_append_entries = 100      # æœ€å¤§è¿½åŠ æ—¥å¿—æ‰¹é‡å¤§å° / Maximum append entries batch size

# [migration]
# # æ§½è¿ç§»é…ç½® / Slot Migration Configuration
# batch_size = 100              # è¿ç§»æ‰¹é‡å¤§å° / Migration batch size (keys per batch)
# concurrency = 4               # è¿ç§»å¹¶å‘æ•° / Migration concurrency
# timeout = 300                 # è¿ç§»è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰/ Migration timeout in seconds
# rate_limit = 0                # è¿ç§»é™é€Ÿ / Migration rate limit (keys per second, 0 = unlimited)

# [failover]
# # æ•…éšœè½¬ç§»é…ç½® / Failover Configuration
# node_timeout = 15000          # èŠ‚ç‚¹è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰/ Node timeout in milliseconds
# replica_validity_factor = 10  # å‰¯æœ¬æœ‰æ•ˆæ€§å› å­ / Replica validity factor
# failover_auth_timeout = 5000  # æ•…éšœè½¬ç§»æˆæƒè¶…æ—¶ / Failover auth timeout in milliseconds
# require_majority = true       # æ˜¯å¦è¦æ±‚å¤šæ•°åŒæ„æ•…éšœè½¬ç§» / Require majority for failover

# [persistence]
# # æŒä¹…åŒ–é…ç½® / Persistence Configuration
# enabled = true                # æ˜¯å¦å¯ç”¨æŒä¹…åŒ– / Enable persistence
# mode = "hybrid"               # æŒä¹…åŒ–æ¨¡å¼ / Persistence mode
# rdb_interval = 900            # RDB å¿«ç…§é—´éš”ï¼ˆç§’ï¼‰/ RDB snapshot interval in seconds
# aof_sync = "everysec"         # AOF åŒæ­¥ç­–ç•¥ / AOF sync policy

# [performance]
# # æ€§èƒ½é…ç½® / Performance Configuration
# worker_threads = 0            # å·¥ä½œçº¿ç¨‹æ•°ï¼ˆ0 = CPU æ ¸å¿ƒæ•°ï¼‰/ Worker threads
# tcp_nodelay = true            # æ˜¯å¦å¯ç”¨ TCP_NODELAY
# tcp_keepalive = true          # æ˜¯å¦å¯ç”¨ SO_KEEPALIVE
# lua_timeout = 5000            # Lua è„šæœ¬è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰/ Lua script timeout

# [monitoring]
# # ç›‘æ§é…ç½® / Monitoring Configuration
# prometheus_enabled = false    # æ˜¯å¦å¯ç”¨ Prometheus æŒ‡æ ‡ / Enable Prometheus metrics
# prometheus_port = 9100        # Prometheus æŒ‡æ ‡ç«¯å£ / Prometheus metrics port
# slowlog_enabled = true        # æ˜¯å¦å¯ç”¨æ…¢æ—¥å¿— / Enable slow log
# slowlog_threshold = 10000     # æ…¢æ—¥å¿—é˜ˆå€¼ï¼ˆå¾®ç§’ï¼‰/ Slow log threshold in microseconds
# slowlog_max_len = 128         # æ…¢æ—¥å¿—æœ€å¤§æ¡ç›®æ•° / Maximum slow log entries

# [security]
# # å®‰å…¨é…ç½® / Security Configuration
# # requirepass = "your_cluster_password"       # å¯†ç è®¤è¯ / Password authentication
# # cluster_auth = "your_cluster_auth_key"      # é›†ç¾¤å†…éƒ¨é€šä¿¡å¯†é’¥ / Cluster auth key
# # tls_enabled = false                          # æ˜¯å¦å¯ç”¨ TLS / Enable TLS
# # tls_cert_file = "./certs/server.crt"
# # tls_key_file = "./certs/server.key"
