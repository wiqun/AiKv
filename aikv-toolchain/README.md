# AiKv Toolchain

ğŸ”§ AiKv é¡¹ç›®ç®¡ç†å·¥å…·é“¾ - **ä¸€é”®éƒ¨ç½²** AiKv é›†ç¾¤çš„å‚»ç“œå¼å·¥å…·

## ğŸš€ 30 ç§’å¿«é€Ÿéƒ¨ç½²é›†ç¾¤

```bash
# å®‰è£…å·¥å…·
cd aikv-toolchain && cargo install --path . && cd ..

# ä¸€é”®éƒ¨ç½²é›†ç¾¤ï¼ˆå°±è¿™ä¸€æ¡å‘½ä»¤ï¼ï¼‰
aikv-tool cluster setup

# è¿æ¥ä½¿ç”¨
redis-cli -c -h 127.0.0.1 -p 6379
```

**å°±è¿™ä¹ˆç®€å•ï¼** `cluster setup` ä¼šè‡ªåŠ¨å®Œæˆï¼š
1. âœ… ç”Ÿæˆé›†ç¾¤éƒ¨ç½²é…ç½®æ–‡ä»¶
2. âœ… æ„å»ºå¸¦é›†ç¾¤åŠŸèƒ½çš„ Docker é•œåƒ  
3. âœ… å¯åŠ¨ 6 èŠ‚ç‚¹é›†ç¾¤å®¹å™¨
4. âœ… åˆå§‹åŒ– MetaRaft æˆå‘˜
5. âœ… åˆ†é…æ§½ä½å’Œé…ç½®ä¸»ä»å¤åˆ¶

## åŠŸèƒ½ç‰¹æ€§

### ğŸŒŸ é›†ç¾¤ç®¡ç†ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰
- ğŸš€ **ä¸€é”®éƒ¨ç½²** - `cluster setup` å®Œæˆæ‰€æœ‰éƒ¨ç½²å·¥ä½œ
- â–¶ï¸ **å¯åŠ¨é›†ç¾¤** - `cluster start` å¯åŠ¨å·²éƒ¨ç½²çš„é›†ç¾¤
- ğŸ”§ **åˆå§‹åŒ–é›†ç¾¤** - `cluster init` é…ç½® MetaRaft å’Œæ§½åˆ†é…
- ğŸ“Š **é›†ç¾¤çŠ¶æ€** - `cluster status` æŸ¥çœ‹é›†ç¾¤å¥åº·çŠ¶å†µ
- â¹ï¸ **åœæ­¢é›†ç¾¤** - `cluster stop` ä¼˜é›…åœæ­¢é›†ç¾¤

### ğŸ”¨ å…¶ä»–åŠŸèƒ½
- æ„å»º AiKvï¼ˆå•èŠ‚ç‚¹/é›†ç¾¤æ¨¡å¼ï¼‰
- æ„å»º Docker é•œåƒ
- ç”Ÿæˆéƒ¨ç½²é…ç½®æ–‡ä»¶
- è¿è¡Œæ€§èƒ½åŸºå‡†æµ‹è¯•
- äº¤äº’å¼ TUI ç•Œé¢

## å®‰è£…

```bash
# åœ¨ AiKv é¡¹ç›®æ ¹ç›®å½•ä¸‹
cd aikv-toolchain

# å®‰è£…åˆ° cargo bin ç›®å½•ï¼ˆæ¨èï¼‰
cargo install --path .

# æˆ–è€…åªç¼–è¯‘ä¸å®‰è£…
cargo build --release
./target/release/aikv-tool --help
```

## ä½¿ç”¨æ–¹æ³•

### ğŸŒŸ é›†ç¾¤ç®¡ç†ï¼ˆæœ€å¸¸ç”¨ï¼‰

```bash
# ä¸€é”®éƒ¨ç½²é›†ç¾¤ï¼ˆæ¨èï¼ï¼‰
aikv-tool cluster setup
# æˆ–å¿«æ·æ–¹å¼
aikv-tool up

# å…¶ä»–é›†ç¾¤æ“ä½œï¼š
aikv-tool cluster start     # å¯åŠ¨é›†ç¾¤å®¹å™¨
aikv-tool cluster init      # åˆå§‹åŒ–é›†ç¾¤é…ç½®
aikv-tool cluster status    # æŸ¥çœ‹é›†ç¾¤çŠ¶æ€
aikv-tool cluster restart   # é‡å¯é›†ç¾¤ï¼ˆåœæ­¢+å¯åŠ¨+åˆå§‹åŒ–ï¼‰
aikv-tool cluster logs      # æŸ¥çœ‹æ—¥å¿—
aikv-tool cluster logs -f   # å®æ—¶æŸ¥çœ‹æ—¥å¿—
aikv-tool cluster stop      # åœæ­¢é›†ç¾¤
aikv-tool cluster stop -v   # åœæ­¢å¹¶æ¸…ç†æ•°æ®å·
# æˆ–å¿«æ·æ–¹å¼
aikv-tool down              # åœæ­¢é›†ç¾¤
aikv-tool down -v           # åœæ­¢å¹¶æ¸…ç†æ•°æ®
```

### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# æ„å»º AiKv
aikv-tool build                    # å¼€å‘æ„å»º
aikv-tool build --release          # å‘å¸ƒæ„å»º
aikv-tool build --release --cluster # é›†ç¾¤ç‰ˆæœ¬

# æ„å»º Docker é•œåƒ
aikv-tool docker                   # æ ‡å‡†é•œåƒ
aikv-tool docker --cluster         # é›†ç¾¤é•œåƒ
aikv-tool docker --tag v0.1.0      # æŒ‡å®šæ ‡ç­¾

# ç”Ÿæˆéƒ¨ç½²æ–‡ä»¶
aikv-tool deploy                   # å•èŠ‚ç‚¹éƒ¨ç½²
aikv-tool deploy -t cluster        # é›†ç¾¤éƒ¨ç½²
aikv-tool deploy -o ./my-deploy    # æŒ‡å®šè¾“å‡ºç›®å½•

# æŸ¥çœ‹é…ç½®æ–‡æ¡£
aikv-tool config                   # å•èŠ‚ç‚¹é…ç½®
aikv-tool config --cluster         # é›†ç¾¤é…ç½®

# è¿è¡ŒåŸºå‡†æµ‹è¯•
aikv-tool bench                    # å¿«é€Ÿæµ‹è¯•
aikv-tool bench -t full            # å®Œæ•´æµ‹è¯•

# æŸ¥çœ‹ä¼˜åŒ–å»ºè®®
aikv-tool optimize

# æŸ¥çœ‹æ–‡æ¡£
aikv-tool docs                     # é€šç”¨æ–‡æ¡£
aikv-tool docs --topic api         # API æ–‡æ¡£
aikv-tool docs --topic deploy      # éƒ¨ç½²æ–‡æ¡£
aikv-tool docs --topic performance # æ€§èƒ½æ–‡æ¡£
aikv-tool docs --topic cluster     # é›†ç¾¤æ–‡æ¡£

# æŸ¥çœ‹é¡¹ç›®çŠ¶æ€
aikv-tool status
```

## TUI é”®ç›˜å¿«æ·é”®

### ä¸»èœå•
- `â†‘/k` - å‘ä¸Šç§»åŠ¨
- `â†“/j` - å‘ä¸‹ç§»åŠ¨
- `Enter` - é€‰æ‹©
- `q` - é€€å‡º

### æ„å»ºé€‰é¡¹
- `r` - åˆ‡æ¢ Release æ¨¡å¼
- `c` - åˆ‡æ¢ Cluster ç‰¹æ€§
- `b/Enter` - å¼€å§‹æ„å»º
- `q/Esc` - è¿”å›èœå•

### éƒ¨ç½²é€‰é¡¹
- `t` - åˆ‡æ¢éƒ¨ç½²ç±»å‹ (å•èŠ‚ç‚¹/é›†ç¾¤)
- `+/-` - è°ƒæ•´èŠ‚ç‚¹æ•°é‡
- `g/Enter` - ç”Ÿæˆéƒ¨ç½²æ–‡ä»¶
- `q/Esc` - è¿”å›èœå•

### æ–‡æ¡£/é…ç½®è§†å›¾
- `â†‘/k` - å‘ä¸Šæ»šåŠ¨
- `â†“/j` - å‘ä¸‹æ»šåŠ¨
- `PageUp/PageDown` - å¿«é€Ÿæ»šåŠ¨
- `c` - åˆ‡æ¢é…ç½®æ¨¡å¼ (å•èŠ‚ç‚¹/é›†ç¾¤)
- `q/Esc` - è¿”å›èœå•

## ç”Ÿæˆçš„éƒ¨ç½²æ–‡ä»¶

### å•èŠ‚ç‚¹éƒ¨ç½²
```
deploy/
â”œâ”€â”€ docker-compose.yml   # Docker Compose é…ç½®
â”œâ”€â”€ aikv.toml            # AiKv é…ç½®æ–‡ä»¶
â”œâ”€â”€ README.md            # éƒ¨ç½²è¯´æ˜
â”œâ”€â”€ start.sh             # å¯åŠ¨è„šæœ¬
â””â”€â”€ stop.sh              # åœæ­¢è„šæœ¬
```

### é›†ç¾¤éƒ¨ç½²
```
deploy/
â”œâ”€â”€ docker-compose.yml   # 6 èŠ‚ç‚¹é›†ç¾¤é…ç½®
â”œâ”€â”€ aikv-node1.toml      # èŠ‚ç‚¹ 1 é…ç½®
â”œâ”€â”€ aikv-node2.toml      # èŠ‚ç‚¹ 2 é…ç½®
â”œâ”€â”€ aikv-node3.toml      # èŠ‚ç‚¹ 3 é…ç½®
â”œâ”€â”€ aikv-node4.toml      # èŠ‚ç‚¹ 4 é…ç½®
â”œâ”€â”€ aikv-node5.toml      # èŠ‚ç‚¹ 5 é…ç½®
â”œâ”€â”€ aikv-node6.toml      # èŠ‚ç‚¹ 6 é…ç½®
â”œâ”€â”€ README.md            # é›†ç¾¤éƒ¨ç½²è¯´æ˜
â”œâ”€â”€ start.sh             # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop.sh              # åœæ­¢è„šæœ¬
â””â”€â”€ init-cluster.sh      # é›†ç¾¤åˆå§‹åŒ–è„šæœ¬
```

## å¿«é€Ÿå¼€å§‹

### æ¨èæ–¹å¼ï¼šä¸€é”®éƒ¨ç½²é›†ç¾¤

```bash
# è¿™ä¸€æ¡å‘½ä»¤å®Œæˆæ‰€æœ‰å·¥ä½œï¼
aikv-tool cluster setup

# éªŒè¯é›†ç¾¤çŠ¶æ€
redis-cli -c -p 6379 CLUSTER INFO
redis-cli -c -p 6379 CLUSTER NODES

# å¼€å§‹ä½¿ç”¨
redis-cli -c -p 6379 SET hello world
redis-cli -c -p 6379 GET hello
```

### 1. åªéƒ¨ç½²å•èŠ‚ç‚¹

```bash
aikv-tool deploy -t single -o ./deploy-single
cd deploy-single
./start.sh
```

### 2. æ‰‹åŠ¨åˆ†æ­¥éƒ¨ç½²é›†ç¾¤

```bash
# ç”Ÿæˆéƒ¨ç½²æ–‡ä»¶
aikv-tool deploy -t cluster

# æ„å»º Docker é•œåƒ
aikv-tool docker --cluster --tag cluster

# å¯åŠ¨å®¹å™¨
aikv-tool cluster start

# åˆå§‹åŒ–é›†ç¾¤
aikv-tool cluster init
```

## é›†ç¾¤æ¶æ„

ä¸€é”®éƒ¨ç½²ä¼šåˆ›å»º 6 èŠ‚ç‚¹é›†ç¾¤ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              AiKv Cluster (6 nodes)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  Node 1  â”‚  â”‚  Node 2  â”‚  â”‚  Node 3  â”‚           â”‚
â”‚   â”‚  Master  â”‚  â”‚  Master  â”‚  â”‚  Master  â”‚           â”‚
â”‚   â”‚  :6379   â”‚  â”‚  :6380   â”‚  â”‚  :6381   â”‚           â”‚
â”‚   â”‚  Slots:  â”‚  â”‚  Slots:  â”‚  â”‚  Slots:  â”‚           â”‚
â”‚   â”‚  0-5460  â”‚  â”‚5461-10922â”‚  â”‚10923-16383â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚
â”‚        â”‚             â”‚             â”‚                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚  Node 4  â”‚  â”‚  Node 5  â”‚  â”‚  Node 6  â”‚           â”‚
â”‚   â”‚  Replica â”‚  â”‚  Replica â”‚  â”‚  Replica â”‚           â”‚
â”‚   â”‚  :6382   â”‚  â”‚  :6383   â”‚  â”‚  :6384   â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                       â”‚
â”‚   MetaRaft Members: Node 1, 2, 3                     â”‚
â”‚   Slot Distribution: 16384 slots across 3 masters    â”‚
â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æŠ€æœ¯æ ˆ

- **Ratatui** - ç»ˆç«¯ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **Crossterm** - è·¨å¹³å°ç»ˆç«¯æ“ä½œ
- **Tokio** - å¼‚æ­¥è¿è¡Œæ—¶
- **Clap** - å‘½ä»¤è¡Œå‚æ•°è§£æ
- **Serde** - åºåˆ—åŒ–/ååºåˆ—åŒ–

## è®¸å¯è¯

MIT License
